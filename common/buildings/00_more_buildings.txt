#Infrastructure

road_network = {
	cost = 200			#Roads are expensive!
	time = 36
	
	build_trigger = {
        OR = {
			is_capital = yes
			province_has_center_of_trade_of_level = 2
			province_has_center_of_trade_of_level = 3
			any_neighbor_province = {
				has_building = road_network
			}
		}
    }
	
	modifier = {
		local_friendly_movement_speed = 0.2 #Troop movement and whatnot
		local_hostile_movement_speed = 0.1
		province_trade_power_modifier = 0.25 #Toll roads
		allowed_num_of_buildings = 2 #Adding a bit of a reason to actually build roads.
	}
	
	ai_will_do = {
		factor = 10 #The AI does consider the trade power, but I did not see a single road being built, so increasing this for now.
	}
}

mb_canal = {
	cost = 200			#Stuff
	time = 36
	
	build_trigger = {
        OR = {
			has_port = yes
			any_neighbor_province = {
				has_building = mb_canal
			}
		}
    }
	
	modifier = {
		local_development_cost = -0.2 #Canals allow trade, thus furthering development
		province_trade_power_modifier = 0.25 #Promotes trade.
		allowed_num_of_buildings = 2 #Adding a bit of a reason to actually build canals.
	}
	
	ai_will_do = {
		factor = 10 #The AI does consider the trade power, but I did not see a single canal being built, so increasing this for now.
	}
}

grain_depot = {
	cost = 100			#Stuff
	time = 36
	
	modifier = {
		local_monthly_devastation = -0.1
	}
	
	ai_will_do = {
		factor = 80 #AI should avoid this in provinces with no devastation.
		modifier = {
			factor = 1.25
			devastation = 10
		}
		modifier = {
			factor = 1.25
			devastation = 20
		}
		modifier = {
			factor = 1.5
			devastation = 30
		}
		modifier = {
			factor = 1.5
			devastation = 40
		}
		modifier = {
			factor = 1.5
			devastation = 50
		}
		modifier = {
			factor = 1.5
			devastation = 60
		}
		modifier = {
			factor = 2
			devastation = 70
		}
		modifier = {
			factor = 2
			devastation = 80
		}
		modifier = {
			factor = 2.5
			devastation = 90
		}
	}
}

#Manufactory(-ish)

mint = {
	#manufactory = {
	#}
	cost = 500			#This is very much like a manufactory
	time = 36
	
	build_trigger = {
		trade_goods = gold
        #development = 30
    }
	
	keep_trigger = {
		trade_goods = gold
	}
	
	modifier = {
		trade_goods_size_modifier = 1
		global_tax_modifier = 0.05
		monthly_gold_inflation_modifier = 0.1
		#inflation_reduction = -0.1 #Logically, this costs you 0.3 admin points/month/building. I think this is a sensible matchup.
	}
	#show_separate = yes # Means as a manufactory it will be shown according to the old way
	
	ai_will_do = {
		factor = 6
		#Lots of factors taken from BT manufactories
		modifier = {
			factor = 0.5
			FROM = { inflation = 5 }
		}	#Does not want to build if has high inflation
		modifier = {
			factor = 0.4
			FROM = { inflation = 10 }
		}	#Does not want to build if has high inflation
		modifier = {
			factor = 0.3
			FROM = { inflation = 15 }
		}	#Does not want to build if has high inflation
		modifier = {
			factor = 0.2
			FROM = { inflation = 20 }
		}	#Does not want to build if has high inflation
		modifier = {
			factor = 0.1
			FROM = { inflation = 25 }
		}	#AI, the fuck you doing?
		modifier = {
			factor = 0.9
			FROM = { technology_group = eastern }
		}	#Minor penalty for eastern tech
		modifier = {
			factor = 0.6
			FROM = {
				OR = {
					technology_group = ottoman
					technology_group = muslim
				}
			}
		}	#Lesser penalty for non european medium-high tech groups.
		modifier = {
			factor = 0.4
			FROM = {
				OR = {
					technology_group = indian
					technology_group = east_african
					technology_group = chinese
					technology_group = sub_saharan
					technology_group = central_african
					technology_group = nomad_group
				}
			}
		}	#Penalty for medium-low tech groups
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					technology_group = mesoamerican
					technology_group = andean
					technology_group = north_american
					technology_group = south_american
					#Any other future new world cultures should be added here
				}
			}
		}	#Much like the university, some technology groups simply did not have the infrastructure, history, or circumstance to evolve and develop in this way.
		modifier = {
			factor = 1.5
			FROM = {				
				is_great_power = yes
			}
		}	#Great powers get a sustantial bonus, putting Muslims on par with Europeans, other Old World techs on par with Muslims, and rocketing European powers even higher.
		modifier = {
			factor = 0.1
			FROM = {
				AND = {
					NOT = { technology_group = western }
					NOT = { total_development = 100 }
				}
			}
		}	#Small non western AI countries shouldn't be grasping like this, institutions can spread to them from bigger neighbours. Further penalty even beyond the tech group penalty above. 
		modifier = {
			factor = 1.3
			owner = { ruler_has_personality = entrepreneur_personality }
		}
		modifier = {
			factor = 1.3
			owner = { ruler_has_personality = industrious_personality }
		}
		modifier = {
			factor = 1.3
			owner = { full_idea_group = economic_ideas }
		}
		modifier = {
			factor = 1.1
			base_production = 4
		}
		modifier = {
			factor = 1.2
			base_production = 8
		}
		modifier = {
			factor = 1.4
			base_production = 12
		}
	}
}

#Army Recruitment
armory = {
	cost = 50			#Building an armoury should not cost much.
	time = 12
	
	modifier = {
		#local_regiment_cost = -0.125
		#regiment_recruit_speed = -0.25
		supply_limit = 1
		supply_limit_modifier = 0.50
	}
	
	ai_will_do = {
		factor = 40 #To counterbalance the non-existent economic value of this building, automatically assigning it a value of 0.01. NOTE: AI seems to see some value in supply limit, so lowering.
		modifier = {
			factor = 0.2
			is_state = no
		}
		modifier = { #The AI seems to get +0.02 value factor per manpower dev on a fort province. It's not as bad as the sailors one.
			factor = 0.1
			has_fort_building_trigger = yes
		}
	}
}

arsenal = {
	cost = 200			#Building an armoury should not cost much.
	time = 24
	
	make_obsolete = armory
	
	modifier = {
		local_regiment_cost = -0.25
		regiment_recruit_speed = -0.50 			#Meant to be a bigger boost than the conscription center, but stacks with it. And before you point out this makes a total of -75%, I'm fine with that.
		supply_limit = 2
		supply_limit_modifier = 1.00
	}
	
	ai_will_do = {
		factor = 80 #To counterbalance the non-existent economic value of this building, automatically assigning it a value of 0.01. NOTE: AI seems to see some value in supply limit, so lowering.
		modifier = {
			factor = 0.2
			is_state = no
		}
		modifier = { #The AI seems to get +0.02 value factor per manpower dev on a fort province. It's not as bad as the sailors one.
			factor = 0.1
			has_fort_building_trigger = yes
		}
	}
}

#Navy Recruitment

naval_arsenal = {
	cost = 100			#Following the trend of the armoury
	time = 12
	
	build_trigger = {
		has_port = yes
	}
	
	modifier = {
		local_ship_cost = -0.25			
		ship_recruit_speed = -0.375
	}
	
	ai_will_do = {
		factor = 80 #To counterbalance the non-existent economic value of this building, automatically assigning it a value of 0.01.
	}
}

naval_base = {
	cost = 200			#Following the trend of the armoury
	time = 24

	build_trigger = {
		has_port = yes
	}
	
	make_obsolete = naval_arsenal
	
	modifier = {
		local_ship_cost = -0.50			
		ship_recruit_speed = -0.75
	}
	
	ai_will_do = {
		factor = 160 #To counterbalance the non-existent economic value of this building, automatically assigning it a value of 0.01.
	}
}

#Level 3 Taxation

tax_assessor = { #Will need re-assessment
	make_obsolete = cathedral
	
	cost = 300	#Lowered a bit to compensate for the lack of missionary strength.		
	time = 48			
	modifier = {
		#local_missionary_strength = 0.02			#BTAddOn changed from 0.03, might slow conversion slightly, but avg dev is also lower, so that might be a good thing
		local_tax_modifier = 1.0 
	}
	
	ai_will_do = {
		factor = 1 #Removed all factors.
	}
}

#Level 3 Production

customs_house = { #Is in reality the Stock Exchange.
	cost = 400			
	time = 48			
	
	make_obsolete = counting_house
	modifier = {
		local_development_cost = -0.3			#BTAddOn new. A little non-cash boost to make this building not worthless when it is too late in the game to make your ducats back from the cost to build it. Note the corresponding dev cost reduction has been removed from universities, where I felt it made less logical sense. Here, production and industry encourage development.
		local_production_efficiency = 1			#BTAddOn changed from 1.0. Part of the comprehensive balance overhaul to adjust buildings to the BT map (with all its new provinces)
	}
	
	allow_in_gold_provinces = no
	
	ai_will_do = {
		factor = 1.34 #Slightly buffed factor to account for the slightly higher cost.
	}
}

#Subject-only buildings

march_building = {
	cost = 500			#I think this is sensible, considering you only ever build 1 per subject.
	time = 48

	build_trigger = {
		owner = {
			is_march_or_similar_subject = yes
		}
		is_capital = yes
	}

	keep_trigger = {
		owner = {
			is_march_or_similar_subject = yes
		}
		is_capital = yes
	}
	
	modifier = {
		defensiveness = 0.2
		fort_maintenance_modifier = -0.5
	}
	
	ai_will_do = {
		factor = 500 #AI sees no value in this building, so this brings it to 1% yearly return, i.e AI will build it.
	}
}

embassy = {
	cost = 500			#I think this is sensible, considering you only ever build 1 per subject.
	time = 48

	build_trigger = {
		owner = {
			is_subject = yes
		}
		is_capital = yes
	}

	keep_trigger = {
		owner = {
			is_subject = yes
		}
		is_capital = yes
	}
	
	modifier = {
		liberty_desire = -15
	}
	
	ai_will_do = {
		factor = 500 #AI sees no value in this building, so this brings it to 1% yearly return, i.e AI will build it.
	}
}

spy_agency = {
	cost = 500			#I think this is sensible, considering you only ever build 1 per subject.
	time = 48

	build_trigger = {
		owner = {
			is_subject = yes
		}
		is_capital = yes
	}

	keep_trigger = {
		owner = {
			is_subject = yes
		}
		is_capital = yes
	}
	
	modifier = {
		fabricate_claims_cost = -0.33 
		administrative_efficiency = 0.1 #This building is here as a way of buffing subjects a bit.
	}
	
	ai_will_do = {
		factor = 500 #AI sees no value in this building, so this brings it to 1% yearly return, i.e AI will build it.
	}
}

#Area-wide buildings

post_office = {
	cost = 250			#An area-wide effect seems sensible for this price.
	time = 36

	build_trigger = {
	}
	
	keep_trigger = { #Copying vanilla for now.
	}
	
	modifier = {
		local_institution_spread = 0.5
		province_trade_power_modifier = 0.25
	}
	
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
	}

	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = { #There's no actual remove province triggered modifier command, is there?
	}
	
	ai_will_do = {
		factor = 1.5 #AI sees value in this building, so factor will be 1.5 (accounting for the vanilla 1.5 factor)
	}
}

glorious_monument = {
	cost = 500			#An area-wide effect seems sensible for this price.
	time = 36


	build_trigger = {
		owner = {
			is_subject = yes
		}
		is_capital = yes
	}
	
	keep_trigger = { #Copying vanilla for now.
		owner = {
			is_subject = yes
		}
		is_capital = yes
	}
	
	modifier = {
		liberty_desire = -15
	}
	
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
	}

	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = { 
	}
	
	ai_will_do = {
		factor = 200 #AI sees no value in this building, so this brings it to 0.8% yearly return
		#Dynamix
		modifier = {
			factor = 2
			FROM = {
				ruler_has_personality = conqueror_personality				
			}
		}
		modifier = {
			factor = 2
			FROM = {
				ruler_has_personality = architectural_visionary_personality
			}
		}
		modifier = {
			factor = 2
			FROM = {
				ruler_has_personality = embezzler_personality
			}
		}
		modifier = {
			factor = 2
			FROM = {
				consort_has_personality = conqueror_personality
			}
		}
		modifier = {
			factor = 2
			FROM = {
				consort_has_personality = architectural_visionary_personality
			}
		}
		modifier = {
			factor = 2
			FROM = {
				consort_has_personality = embezzler_personality
			}
		}
	}
}

treasury_office = {
	cost = 250			#An area-wide effect seems sensible for this price.
	time = 36

	allow_in_gold_provinces = no
	
	build_trigger = {
	}
	
	keep_trigger = { #Copying vanilla for now
	}
	
	modifier = {
		#Area-wide effects:
		trade_goods_size_modifier = 0.25
	}
	
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
	}

	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = { #There's no actual remove province triggered modifier command, is there?
	}
	
	ai_will_do = {
		factor = 1 #AI sees value in this building, so factor will be 1.
		modifier = { #4 BP
			factor = 2
			base_production = 4
		}
		modifier = { #8 BP
			factor = 3
			base_production = 8
		}
		modifier = { #12 BP
			factor = 4
			base_production = 12
		}	
	}
}

constable = {
	cost = 250			#An area-wide effect seems sensible for this price.
	time = 36
	
	build_trigger = {
	}
	
	keep_trigger = { 
	}
	
	modifier = {
		#Area-wide effects:
		local_tax_modifier = 0.33
	}
	
	# THIS = Province, FROM = Builder(not nessecairly owner, can be overlord)
	on_built = {
	}

	# THIS = Province, FROM = Destroyer, Will not be called on buildings made obsolete!
	on_destroyed = {
	}
	
	ai_will_do = {
		factor = 1 #AI sees value in this building, so factor will be 1.
		modifier = { #4 BT
			factor = 2
			base_tax = 4
		}
		modifier = { #8 BT
			factor = 3
			base_tax = 8
		}
		modifier = { #12 BT
			factor = 4
			base_tax = 12
		}
	}
}


















